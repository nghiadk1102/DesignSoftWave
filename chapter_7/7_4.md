7.4 Interface vs Implemented

Một quy tắc của “class diffrent, abtract diffirent” là interface của một class thường phải khác với cách triển khai của nó: các biểu diễn được sử dụng phía bên trong phải khác với các phần trừu tượng xuất hiện trong interface. Nếu cả hai có những điểm trừu tượng giống nhau, thì class có thể không sâu lắm. Ví dụ, trong dự án soạn thảo văn bản được thảo luận ở Chương 6, hầu hết các nhóm đã triển khai mô-đun văn bản dưới dạng dòng văn bản, với mỗi dòng được lưu trữ riêng biệt. Một số nhóm cũng thiết kế các API cho class văn bản xung quanh các dòng, với các phương thức như getLine và putLine. Tuy nhiên, điều này làm cho class văn bản trở nên nông cạn và khó sử dụng. Trong mã user interface cấp cao hơn, thông thường là chèn văn bản vào giữa dòng (ví dụ: khi người dùng đang nhập) hoặc xóa một loạt văn bản kéo dài các dòng. Với API hướng dòng cho class văn bản, người gọi buộc phải tách và nối các dòng để triển khai các hoạt động trên user interface. Mã này không hề tầm thường và nó đã được sao chép và rải rác trong quá trình triển khai user interface.

Các text class dễ sử dụng hơn nhiều khi chúng cung cấp interface hướng ký tự, chẳng hạn như phương thức chèn để chèn một chuỗi văn bản tùy ý (có thể bao gồm các dòng mới) tại một vị trí tùy ý trong văn bản và một phương thức xóa sẽ xóa văn bản giữa hai vị trí tùy ý trong văn bản. Về mặt nội bộ, văn bản vẫn được trình bày dưới dạng dòng. interface hướng ký tự bao hàm sự phức tạp của việc tách dòng và nối bên trong text class, điều này làm cho text class sâu hơn và đơn giản hóa mã cấp cao hơn sử dụng class. Với cách tiếp cận này, API văn bản hoàn toàn khác với cơ chế lưu trữ hướng dòng; sự khác biệt thể hiện chức năng có giá trị do class cung cấp.